<!DOCTYPE html>
<html lang="gu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPSC/STI рк╕рлНркЯрк╛ркЗрк▓ ркорлЛркХ ркЯрлЗрк╕рлНркЯ (20 рккрлНрк░рк╢рлНркирлЛ)</title>
    <style>
        /* Base Styles for all screen sizes (Mobile First Approach) */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.6;
            padding: 10px;
            margin: 0;
        }
        .container {
            width: 100%;
            max-width: 950px;
            margin: auto;
            background: #fff;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            box-sizing: border-box;
        }
        h1 {
            text-align: center;
            color: #d9534f;
            border-bottom: 3px solid #d9534f;
            padding-bottom: 8px;
            margin-bottom: 20px;
            font-size: 1.5em;
        }
        .header-info {
            background: #fcf8e3;
            border: 1px solid #faebcc;
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 5px;
            color: #8a6d3b;
            text-align: center;
            font-weight: bold;
            font-size: 0.9em;
        }
        /* Start Screen Style */
        #startScreen {
            text-align: center;
            padding: 50px 20px;
        }
        #startBtn {
            background-color: #007bff;
            color: white;
            padding: 15px 30px;
            font-size: 1.2em;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 20px;
            transition: background-color 0.3s;
        }
        #startBtn:hover {
            background-color: #0056b3;
        }

        /* Quiz Content (Initially Hidden) */
        #quizContent {
            display: none; 
        }
        
        /* Question and Control Styles */
        .question-block {
            border: 1px solid #ccc;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            display: none;
            background-color: #ffffff;
        }
        /* Removed .question-number styles as the element is now hidden/removed */
        .question-text {
            font-size: 1em;
            margin-bottom: 15px;
            font-weight: 500;
        }
        .options-list {
            list-style: none;
            padding: 0;
        }
        .options-list li {
            margin: 6px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: #f9f9f9;
            cursor: pointer;
            font-size: 0.95em;
        }
        input[type="radio"] {
            margin-right: 8px;
            transform: scale(1.1);
        }
        
        /* Navigation Styles */
        .navigation-controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }
        .control-buttons {
            display: flex;
            justify-content: space-between;
        }
        .btn {
            padding: 12px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            width: 100%;
        }
        .nav-btn { width: 48%; }
        
        /* Button colors */
        #prevBtn { background-color: #f0ad4e; color: white; }
        #nextBtn { background-color: #5cb85c; color: white; }
        #submitBtnBottom { background-color: #d9534f; color: white; margin-top: 10px; }
        #unattemptedBtnTop { background-color: #337ab7; color: white; margin-bottom: 15px; }

        .question-status {
            text-align: center;
            margin-top: 15px;
            padding: 10px 0;
            border-top: 1px solid #eee;
        }
        .status-box {
            display: inline-block;
            width: 25px;
            height: 25px;
            margin: 3px;
            border: 1px solid #ccc;
            border-radius: 4px;
            cursor: pointer;
            line-height: 25px;
            font-size: 0.9em;
            text-align: center;
            flex-shrink: 0;
        }
        .status-box.attempted { background-color: #5cb85c; color: white; }
        .status-box.skipped { background-color: #f0ad4e; color: white; }
        
        /* Result Section - Enhanced UX/UI */
        #resultSection {
            margin-top: 20px;
            padding: 15px;
            border: 2px solid #5bc0de;
            background-color: #fff;
            border-radius: 8px;
            display: none;
        }
        #summaryTable {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        #summaryTable th, #summaryTable td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
            font-size: 0.9em;
        }
        #summaryTable th {
            background-color: #f2f2f2;
        }
        .score-display {
            font-size: 1.5em;
            font-weight: bold;
            text-align: center;
            margin: 15px 0;
            padding: 10px;
            border: 2px dashed #007bff;
            border-radius: 5px;
            background-color: #e6f7ff;
        }
        
        /* Custom Pie Chart Style (Simplified Data Visualization) */
        #chartContainer {
            margin: 20px auto;
            width: 100%;
            max-width: 300px;
            text-align: center;
        }
        .chart-legend div {
            font-size: 0.9em;
            margin: 5px 0;
        }
        .legend-color {
            display: inline-block;
            width: 10px;
            height: 10px;
            margin-right: 5px;
            border-radius: 2px;
        }

        /* Answer Key Section (Collapsible) */
        #solutionButton {
            background-color: #28a745;
            color: white;
            padding: 10px 20px;
            margin-top: 20px;
            width: 100%;
        }
        #answerKeySection {
            margin-top: 10px;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 5px;
            display: none;
        }
        .answer-key-item {
            border-bottom: 1px dashed #ccc;
            padding: 8px 0;
            font-size: 0.9em;
        }
        .correct { color: green; font-weight: bold; }
        .incorrect { color: red; font-weight: bold; }

        /* Media Query for Tablets and Desktops */
        @media (min-width: 600px) {
            .container {
                padding: 25px;
            }
            h1 {
                font-size: 2em;
            }
            .navigation-controls {
                flex-direction: column;
                gap: 15px;
            }
            .control-buttons {
                flex-direction: row;
            }
            .nav-btn { width: 48%; }
            #submitBtnBottom { width: 100%; }
        }

        /* Popup for Skipped Questions */
        .popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }
        .popup-content {
            background: #fff;
            margin: 15% auto;
            padding: 20px;
            border-radius: 8px;
            width: 90%;
            max-width: 400px;
            position: relative;
        }
        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
        }
        .skipped-list {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #eee;
            padding: 10px;
            list-style: decimal;
            list-style-position: inside;
        }
    </style>
</head>
<body>

<div class="container">
    
    <div id="startScreen">
        <h1>ЁЯУЪ GPSC/STI рк╕рлНркЯрк╛ркЗрк▓ ркорлЛркХ ркЯрлЗрк╕рлНркЯ</h1>
        <div class="header-info">
            <h3>рккрлЗрккрк░ рк╡рк┐рк╖ркп: ркЧрлБркЬрк░рк╛ркдркирлЛ ркЗркдрк┐рк╣рк╛рк╕</h3>
            <p>ркХрлБрк▓ рккрлНрк░рк╢рлНркирлЛ: 20</p>
            <p>рк╕рк╛ркЪрлЛ ркЬрк╡рк╛ркм (+1) | ркЦрлЛркЯрлЛ ркЬрк╡рк╛ркм (-0.33) | E рк╡рк┐ркХрк▓рлНркк (0) | ркЦрк╛рк▓рлА ркЫрлЛркбрлЗрк▓рлЛ (-0.33)</p>
            <p style="margin-top: 10px; font-size: 1.1em;">ркдркорлЗ ркЖ ркорлЛркХ ркЯрлЗрк╕рлНркЯ рк╢рк░рлВ ркХрк░рк╡рк╛ ркорк╛ркЯрлЗ ркдрлИркпрк╛рк░ ркЫрлЛ?</p>
        </div>
        <button id="startBtn" onclick="startTest()">ркЯрлЗрк╕рлНркЯ рк╢рк░рлВ ркХрк░рлЛ</button>
    </div>

    <div id="quizContent">
        
        <button id="unattemptedBtnTop" class="btn" onclick="showSkippedQuestions()">ркЕрки-ркПркЯрлЗркорлНрккрлНркЯрлЗркб рккрлНрк░рк╢рлНркирлЛ ркЬрлБркУ</button>

        <div class="question-status">
            <p>рккрлНрк░рк╢рлНрки рк╕рлНркерк┐ркдрк┐ (рккрлНрк░ркпркдрлНрки ркХрк░рлЗрк▓ / ркмрк╛ркХрлА):</p>
            <div id="statusContainer" style="display: flex; flex-wrap: wrap; justify-content: center;"></div>
        </div>

        <div id="quizSection">
            </div>

        <div class="navigation-controls">
            <div class="control-buttons">
                <button id="prevBtn" class="btn nav-btn" disabled>тЖР рккрк╛ркЫрк│</button>
                <button id="nextBtn" class="btn nav-btn">ркЖркЧрк│ тЖТ</button>
            </div>
            <button id="submitBtnBottom" class="btn" onclick="submitTest()">рк╕ркмркорк┐ркЯ ркХрк░рлЛ</button>
        </div>
    </div>
    
    <div id="skippedPopup" class="popup">
        <div class="popup-content">
            <span class="close-btn" onclick="hideSkippedPopup()">&times;</span>
            <h2>ркЕрки-ркПркЯрлЗркорлНрккрлНркЯрлЗркб рккрлНрк░рк╢рлНркирлЛ</h2>
            <p id="skippedMessage"></p>
            <ol class="skipped-list" id="skippedList"></ol>
        </div>
    </div>


    <div id="resultSection">
        <h2>ЁЯОЙ ркорлЛркХ ркЯрлЗрк╕рлНркЯ рккрк░рк┐ркгрк╛рко</h2>
        
        <div class="score-display">
            ркХрлБрк▓ ркЧрлБркг: <span id="finalScore" style="color: #d9534f;"></span> / 20.00
        </div>

        <div id="chartContainer">
            <svg viewBox="0 0 32 32" width="150" height="150" style="transform: rotate(-90deg); margin: 10px;">
                <circle id="chartCorrect" r="16" cx="16" cy="16" fill="transparent" stroke="#5cb85c" stroke-width="32" stroke-dasharray="0 100"></circle>
                <circle id="chartIncorrect" r="16" cx="16" cy="16" fill="transparent" stroke="#f0ad4e" stroke-width="32" stroke-dasharray="0 100" style="transition: stroke-dasharray 0.8s;"></circle>
                <circle id="chartEOption" r="16" cx="16" cy="16" fill="transparent" stroke="#337ab7" stroke-width="32" stroke-dasharray="0 100" style="transition: stroke-dasharray 0.8s;"></circle>
            </svg>
            <div class="chart-legend">
                <div style="color: #5cb85c;"><span class="legend-color" style="background-color: #5cb85c;"></span> рк╕рк╛ркЪрк╛ ркЬрк╡рк╛ркмрлЛ (<span id="correctQsLegend"></span>)</div>
                <div style="color: #f0ad4e;"><span class="legend-color" style="background-color: #f0ad4e;"></span> ркЦрлЛркЯрк╛/ркЦрк╛рк▓рлА ркЫрлЛркбрлЗрк▓рк╛ (<span id="incorrectQsLegend"></span>)</div>
                <div style="color: #337ab7;"><span class="legend-color" style="background-color: #337ab7;"></span> E рк╡рк┐ркХрк▓рлНркк рккрк╕ркВркж (<span id="eOptionQsLegend"></span>)</div>
            </div>
        </div>

        <h3>рккрк░рк┐ркгрк╛рко рк╡рк┐рк╢рлНрк▓рлЗрк╖ркг</h3>
        <table id="summaryTable">
            <tr><th>ркХрлБрк▓ рккрлНрк░рк╢рлНркирлЛ</th><td id="totalQs"></td></tr>
            <tr><th>рккрлНрк░ркпркдрлНрки ркХрк░рлЗрк▓рк╛ рккрлНрк░рк╢рлНркирлЛ</th><td id="attemptedQs"></td></tr>
            <tr><th>ркирлЗркЧрлЗркЯрк┐рк╡ ркорк╛рк░рлНркХрк┐ркВркЧ рк▓рк╛ркЧрлБ (ркЦрлЛркЯрк╛+ркЦрк╛рк▓рлА)</th><td id="negativeQs"></td></tr>
        </table>
        
        <button id="solutionButton" class="btn" onclick="toggleSolution()">ркЬрк╡рк╛ркм ркХрлА ркЕркирлЗ рк╕рлЛрк▓рлНркпрлБрк╢рки ркЬрлБркУ</button>
        
        <div id="answerKeySection">
            <h4 style="color:#d9534f; border-bottom: 1px solid #ccc; padding-bottom: 5px;">рк╕рлЛрк▓рлНркпрлБрк╢рки</h4>
            <div id="answerKey"></div>
        </div>
    </div>

</div>

<script>
    // ----------------------------------------------------------------------
    // ркЧрлБркЬрк░рк╛ркд Mock Test HTML ркЬркирк░рлЗркЯрк░ - рккрлНрк░рк╢рлНрки ркбрлЗркЯрк╛ (Data remains the same)
    // ----------------------------------------------------------------------
    const questionData = [
        { subject: "ркмркВркзрк╛рк░ркг", difficulty: "Hard", question: "ркирлАркЪрлЗркирк╛ рк╡рк┐ркзрк╛ркирлЛ ркзрлНркпрк╛ркиркорк╛ркВ рк▓рлЛ: (рк╡рк┐ркзрк╛рки ркЖркзрк╛рк░рк┐ркд)\nрк╡рк┐ркзрк╛рки 1: рк╕ркВркШ ркЕркирлЗ ркдрлЗркирк╛ рккрлНрк░ркжрлЗрк╢рлЛ (Union and its Territory) ркмркВркзрк╛рк░ркгркирк╛ ркнрк╛ркЧ I ркорк╛ркВ ркЕркирлБркЪрлНркЫрлЗркж 1 ркерлА 4 ркорк╛ркВ рк╕ркорк╛рк╡рк┐рк╖рлНркЯ ркЫрлЗ.\nрк╡рк┐ркзрк╛рки 2: ркирк╡рк╛ рк░рк╛ркЬрлНркпркирлА рк░ркЪркирк╛ ркЕркерк╡рк╛ рк╣рк╛рк▓ркирк╛ рк░рк╛ркЬрлНркпркирлА рк╕рлАркорк╛ркорк╛ркВ рклрлЗрк░рклрк╛рк░ ркорк╛ркдрлНрк░ рк╕рк╛ркорк╛ркирлНркп ркмрк╣рлБркоркдрлА (Simple Majority) ркжрлНрк╡рк╛рк░рк╛ ркХрк░рлА рк╢ркХрк╛ркп ркЫрлЗ.", options: { A: "ркорк╛ркдрлНрк░ рк╡рк┐ркзрк╛рки 1 рк╕рк╛ркЪрлБркВ ркЫрлЗ.", B: "ркорк╛ркдрлНрк░ рк╡рк┐ркзрк╛рки 2 рк╕рк╛ркЪрлБркВ ркЫрлЗ.", C: "рк╡рк┐ркзрк╛рки 1 ркЕркирлЗ 2 ркмркВркирлЗ рк╕рк╛ркЪрк╛ ркЫрлЗ.", D: "рк╡рк┐ркзрк╛рки 1 ркХрлЗ 2 ркорк╛ркВркерлА ркХрлЛркИ рк╕рк╛ркЪрлБркВ ркиркерлА." }, answer: "C", solution: "рк╡рк┐ркзрк╛рки 1 ркЕркирлЗ 2 ркмркВркирлЗ рк╕рк╛ркЪрк╛ ркЫрлЗ. ркмркВркзрк╛рк░ркгркирк╛ ркЕркирлБркЪрлНркЫрлЗркж 3 ркЕркирлЗ 4 ркорлБркЬркм, ркирк╡рк╛ рк░рк╛ркЬрлНркпрлЛркирлА рк░ркЪркирк╛ ркЕркирлЗ рк╕рлАркорк╛ркорк╛ркВ рклрлЗрк░рклрк╛рк░ рк╕ркВрк╕ркж ркжрлНрк╡рк╛рк░рк╛ рк╕рк╛ркорк╛ркирлНркп ркмрк╣рлБркоркдрлАркерлА ркерк╛ркп ркЫрлЗ." },
        { subject: "ркЗркдрк┐рк╣рк╛рк╕", difficulty: "Moderate", question: "рк╕рк┐ркВркзрлБ ркЦрлАркгркирлА рк╕ркВрк╕рлНркХрлГркдрк┐ (Indus Valley Civilization) ркирлБркВ ркХркпрлБркВ рк╕рлНркерк│ ркЬрк╣рк╛ркЬ ркмрк╛ркВркзркХрк╛рко ркЕркирлЗ ркбрлЛркХркпрк╛рк░рлНркб (Dockyard) ркорк╛ркЯрлЗ ркЬрк╛ркгрлАркдрлБркВ рк╣ркдрлБркВ?", options: { A: "ркорлЛрк╣рлЗркВ-ркЬрлЛ-ркжркбрлЛ", B: "рк╣ркбрккрлНрккрк╛", C: "рк▓рлЛркерк▓", D: "ркХрк╛рк▓рлАркмркВркЧрки" }, answer: "C", solution: "рк▓рлЛркерк▓ ркЧрлБркЬрк░рк╛ркдркорк╛ркВ ркЖрк╡рлЗрк▓рлБркВ ркПркХ ркорк╣ркдрлНркдрлНрк╡ркирлБркВ ркмркВркжрк░ рк╢рк╣рлЗрк░ ркЕркирлЗ ркбрлЛркХркпрк╛рк░рлНркб рк╣ркдрлБркВ." },
        { subject: "ркЧркгрк┐ркд", difficulty: "Easy", question: "ркПркХ рк╡рлНркпркХрлНркдрк┐ 2000 рк░рлВрккрк┐ркпрк╛ркирлА рк╡рк╕рлНркдрлБ 10% ркирклрк╛ рк╕рк╛ркерлЗ рк╡рлЗркЪрлЗ ркЫрлЗ. ркдрлЛ ркдрлЗркирлБркВ рк╡рлЗркЪрк╛ркг ркХрк┐ркВркоркд (Selling Price) ркХрлЗркЯрк▓рлА рк╣рк╢рлЗ?", options: { A: "тВ╣ 2100", B: "тВ╣ 2200", C: "тВ╣ 2010", D: "тВ╣ 2300" }, answer: "B", solution: "ркирклрлЛ: 2000 ркирк╛ 10% = 200. рк╡рлЗркЪрк╛ркг ркХрк┐ркВркоркд = 2000 + 200 = тВ╣ 2200." },
        { subject: "ркЕрк░рлНркеркдркВркдрлНрк░", difficulty: "Moderate", question: "ркнрк╛рк░ркдркорк╛ркВ ркирк╛ркгрк╛ркВркХрлАркп ркирлАркдрк┐ (Monetary Policy) ркХрлЛркирк╛ ркжрлНрк╡рк╛рк░рк╛ ркдрлИркпрк╛рк░ ркЕркирлЗ ркЕркорк▓ркорк╛ркВ ркорлВркХрк╡рк╛ркорк╛ркВ ркЖрк╡рлЗ ркЫрлЗ?", options: { A: "ркирк╛ркгрк╛ ркоркВркдрлНрк░рк╛рк▓ркп (Finance Ministry)", B: "ркнрк╛рк░ркдрлАркп рк░рк┐ркЭрк░рлНрк╡ ркмрлЗркВркХ (RBI)", C: "рк╕рлЗркмрлА (SEBI)", D: "ркирлАркдрк┐ ркЖркпрлЛркЧ (NITI Aayog)" }, answer: "B", solution: "RBI рк╡рлНркпрк╛ркЬ ркжрк░рлЛ ркЕркирлЗ ркдрк░рк▓ркдрк╛ (Liquidity) ркжрлНрк╡рк╛рк░рк╛ ркирк╛ркгрк╛ркВркХрлАркп ркирлАркдрк┐ркирлБркВ ркирк┐ркпркорки ркХрк░рлЗ ркЫрлЗ." },
        { subject: "рк░рлАркЭркирк┐ркВркЧ", difficulty: "Medium", question: "ркирлАркЪрлЗ ркЖрккрлЗрк▓рлА рк╢рлНрк░рлЗркгрлАркорк╛ркВ ркЦрлВркЯркдрлА рк╕ркВркЦрлНркпрк╛ рк╢рлЛркзрлЛ: 2, 5, 10, 17, ?, 37", options: { A: "24", B: "26", C: "28", D: "30" }, answer: "B", solution: "рккрлЗркЯрк░рлНрки: $n^2 + 1$. ($1^2+1=2$, $2^2+1=5$, $3^2+1=10$, $4^2+1=17$, $5^2+1=26$, $6^2+1=37$)" },
        { subject: "ркмркВркзрк╛рк░ркг", difficulty: "Medium", question: "ркнрк╛рк░ркдрлАркп ркмркВркзрк╛рк░ркгркирк╛ ркХркпрк╛ ркЕркирлБркЪрлНркЫрлЗркжркирлЗ ркбрлЙ. ркмрлА.ркЖрк░. ркЖркВркмрлЗркбркХрк░ ркжрлНрк╡рк╛рк░рк╛ 'ркмркВркзрк╛рк░ркгркирк╛ ркЖркдрлНркорк╛ ркЕркирлЗ рк╣рлГркжркп' (Soul and Heart of the Constitution) ркдрк░рлАркХрлЗ рк╡рк░рлНркгрк╡рк╡рк╛ркорк╛ркВ ркЖрк╡рлНркпрлЛ рк╣ркдрлЛ?", options: { A: "ркЕркирлБркЪрлНркЫрлЗркж 19", B: "ркЕркирлБркЪрлНркЫрлЗркж 21", C: "ркЕркирлБркЪрлНркЫрлЗркж 32", D: "ркЕркирлБркЪрлНркЫрлЗркж 14" }, answer: "C", solution: "ркЕркирлБркЪрлНркЫрлЗркж 32 ркмркВркзрк╛рк░ркгрлАркп ркЙрккркЪрк╛рк░рлЛркирлЛ ркЕркзрк┐ркХрк╛рк░ (Right to Constitutional Remedies) рккрлНрк░ркжрк╛рки ркХрк░рлЗ ркЫрлЗ." },
        { subject: "ркЗркдрк┐рк╣рк╛рк╕", difficulty: "Hard", question: "ркирлАркЪрлЗркирк╛ рк╡рк┐ркзрк╛ркирлЛ ркзрлНркпрк╛ркиркорк╛ркВ рк▓рлЛ: (рк╡рк┐ркзрк╛рки ркЖркзрк╛рк░рк┐ркд)\nрк╡рк┐ркзрк╛рки 1: ркмрлБркжрлНркз ркжрлНрк╡рк╛рк░рк╛ ркЖрккрк╡рк╛ркорк╛ркВ ркЖрк╡рлЗрк▓рлЛ рккрлНрк░ркерко ркЙрккркжрлЗрк╢ 'ркзрк░рлНркоркЪркХрлНрк░ рккрлНрк░рк╡рк░рлНркдрки' ркдрк░рлАркХрлЗ ркУрк│ркЦрк╛ркп ркЫрлЗ.\nрк╡рк┐ркзрк╛рки 2: ркмрлБркжрлНркзрлЗ рккрлЛркдрк╛ркирлЛ рккрлНрк░ркерко ркЙрккркжрлЗрк╢ ркмрлЛркзркЧркпрк╛ркорк╛ркВ ркЖрккрлНркпрлЛ рк╣ркдрлЛ.", options: { A: "ркорк╛ркдрлНрк░ рк╡рк┐ркзрк╛рки 1 рк╕рк╛ркЪрлБркВ ркЫрлЗ.", B: "ркорк╛ркдрлНрк░ рк╡рк┐ркзрк╛рки 2 рк╕рк╛ркЪрлБркВ ркЫрлЗ.", C: "рк╡рк┐ркзрк╛рки 1 ркЕркирлЗ 2 ркмркВркирлЗ рк╕рк╛ркЪрк╛ ркЫрлЗ.", D: "рк╡рк┐ркзрк╛рки 1 ркХрлЗ 2 ркорк╛ркВркерлА ркХрлЛркИ рк╕рк╛ркЪрлБркВ ркиркерлА." }, answer: "A", solution: "ркмрлБркжрлНркзрлЗ ркдрлЗркоркирлЛ рккрлНрк░ркерко ркЙрккркжрлЗрк╢ рк╕рк╛рк░ркирк╛ркеркорк╛ркВ ркЖрккрлНркпрлЛ рк╣ркдрлЛ, ркмрлЛркзркЧркпрк╛ркорк╛ркВ ркдрлЗркоркирлЗ ркЬрлНркЮрк╛рки рккрлНрк░рк╛рккрлНркд ркеркпрлБркВ рк╣ркдрлБркВ." },
        { subject: "ркЕрк░рлНркеркдркВркдрлНрк░", difficulty: "Hard", question: "ркирлАркЪрлЗркирк╛ рк╡рк┐ркзрк╛ркирлЛ ркзрлНркпрк╛ркиркорк╛ркВ рк▓рлЛ: (рк╡рк┐ркзрк╛рки ркЖркзрк╛рк░рк┐ркд)\nрк╡рк┐ркзрк╛рки 1: рк░рк╛ркЬркХрлЛрк╖рлАркп ркирлАркдрк┐ (Fiscal Policy) ркнрк╛рк░ркд рк╕рк░ркХрк╛рк░ ркжрлНрк╡рк╛рк░рк╛ ркдрлИркпрк╛рк░ ркХрк░рк╡рк╛ркорк╛ркВ ркЖрк╡рлЗ ркЫрлЗ.\nрк╡рк┐ркзрк╛рки 2: ркЖ ркирлАркдрк┐ркорк╛ркВ ркХрк░рк╡рлЗрк░рк╛, ркЦрк░рлНркЪ ркЕркирлЗ ркжрлЗрк╡рк╛ рк╕ркВркмркВркзрк┐ркд ркирк┐рк░рлНркгркпрлЛркирлЛ рк╕ркорк╛рк╡рлЗрк╢ ркерк╛ркп ркЫрлЗ.", options: { A: "ркорк╛ркдрлНрк░ рк╡рк┐ркзрк╛рки 1 рк╕рк╛ркЪрлБркВ ркЫрлЗ.", B: "ркорк╛ркдрлНрк░ рк╡рк┐ркзрк╛рки 2 рк╕рк╛ркЪрлБркВ ркЫрлЗ.", C: "рк╡рк┐ркзрк╛рки 1 ркЕркирлЗ 2 ркмркВркирлЗ рк╕рк╛ркЪрк╛ ркЫрлЗ.", D: "рк╡рк┐ркзрк╛рки 1 ркХрлЗ 2 ркорк╛ркВркерлА ркХрлЛркИ рк╕рк╛ркЪрлБркВ ркиркерлА." }, answer: "C", solution: "рк░рк╛ркЬркХрлЛрк╖рлАркп ркирлАркдрк┐ рк╕рк░ркХрк╛рк░ркирк╛ ркЖрк╡ркХ ркЕркирлЗ ркЦрк░рлНркЪркирк╛ рк╕ркВркЪрк╛рк▓рки рк╕рк╛ркерлЗ рк╕ркВркмркВркзрк┐ркд ркЫрлЗ." },
        { subject: "ркЧркгрк┐ркд", difficulty: "Moderate", question: "ркЬрлЛ ркПркХ ркЪрлЛрк░рк╕ркирлБркВ ркХрлНрк╖рлЗркдрлНрк░рклрк│ (Area) 144 ркЪрлЛрк░рк╕ рк╕рлЗ.ркорлА. рк╣рлЛркп, ркдрлЛ ркдрлЗркирлА рккрк░рк┐ркорк┐ркдрк┐ (Perimeter) ркХрлЗркЯрк▓рлА рк╣рк╢рлЗ?", options: { A: "12 рк╕рлЗ.ркорлА.", B: "24 рк╕рлЗ.ркорлА.", C: "48 рк╕рлЗ.ркорлА.", D: "36 рк╕рлЗ.ркорлА." }, answer: "C", solution: "ркмрк╛ркЬрлБ = $\\sqrt{144} = 12$ рк╕рлЗ.ркорлА. рккрк░рк┐ркорк┐ркдрк┐ = $4 \\times 12 = 48$ рк╕рлЗ.ркорлА." },
        { subject: "ркмркВркзрк╛рк░ркг", difficulty: "Hard", question: "ркирлАркЪрлЗркирк╛ рк╡рк┐ркзрк╛ркирлЛ ркзрлНркпрк╛ркиркорк╛ркВ рк▓рлЛ: (рк╡рк┐ркзрк╛рки ркЖркзрк╛рк░рк┐ркд)\nрк╡рк┐ркзрк╛рки 1: ркорлВрк│ркнрлВркд рклрк░ркЬрлЛ (Fundamental Duties) ркирлЗ ркХрк╛ркпркжрк╛ркХрлАркп рк░рлАркдрлЗ рк▓рк╛ркЧрлБ ркХрк░рлА рк╢ркХрк╛ркдрлА ркиркерлА (Non-justiciable).\nрк╡рк┐ркзрк╛рки 2: ркорлВрк│ркнрлВркд рклрк░ркЬрлЛ 42ркорк╛ ркмркВркзрк╛рк░ркгрлАркп рк╕рлБркзрк╛рк░рлЛ, 1976 ркжрлНрк╡рк╛рк░рк╛ ркЙркорлЗрк░рк╡рк╛ркорк╛ркВ ркЖрк╡рлА рк╣ркдрлА.", options: { A: "ркорк╛ркдрлНрк░ рк╡рк┐ркзрк╛рки 1 рк╕рк╛ркЪрлБркВ ркЫрлЗ.", B: "ркорк╛ркдрлНрк░ рк╡рк┐ркзрк╛рки 2 рк╕рк╛ркЪрлБркВ ркЫрлЗ.", C: "рк╡рк┐ркзрк╛рки 1 ркЕркирлЗ 2 ркмркВркирлЗ рк╕рк╛ркЪрк╛ ркЫрлЗ.", D: "рк╡рк┐ркзрк╛рки 1 ркХрлЗ 2 ркорк╛ркВркерлА ркХрлЛркИ рк╕рк╛ркЪрлБркВ ркиркерлА." }, answer: "C", solution: "ркорлВрк│ркнрлВркд рклрк░ркЬрлЛ рк░рк╢рк┐ркпрки ркмркВркзрк╛рк░ркгркерлА рккрлНрк░рлЗрк░рк┐ркд ркЫрлЗ ркЕркирлЗ ркмркВркирлЗ рк╡рк┐ркзрк╛ркирлЛ рк╕рк╛ркЪрк╛ ркЫрлЗ." },
        { subject: "ркЗркдрк┐рк╣рк╛рк╕", difficulty: "Medium", question: "ркЧрк╛ркВркзрлАркЬрлАркП ркХркпрк╛ ркЧрлЛрк│ркорлЗркЬрлА рккрк░рк┐рк╖ркж (Round Table Conference) ркорк╛ркВ ркнрк╛ркЧ рк▓рлАркзрлЛ рк╣ркдрлЛ?", options: { A: "рккрлНрк░ркерко (First)", B: "ркмрлАркЬрлА (Second)", C: "ркдрлНрк░рлАркЬрлА (Third)", D: "ркПркХрккркг ркирк╣рлАркВ" }, answer: "B", solution: "ркЧрк╛ркВркзрлА-ркЗрк░рк╡рк┐рки ркХрк░рк╛рк░ рккркЫрлА, ркЧрк╛ркВркзрлАркЬрлАркП 1931 ркорк╛ркВ ркпрлЛркЬрк╛ркпрлЗрк▓рлА ркмрлАркЬрлА ркЧрлЛрк│ркорлЗркЬрлА рккрк░рк┐рк╖ркжркорк╛ркВ ркХрлЛркВркЧрлНрк░рлЗрк╕ркирлБркВ рккрлНрк░ркдрк┐ркирк┐ркзрк┐ркдрлНрк╡ ркХрк░рлНркпрлБркВ рк╣ркдрлБркВ." },
        { subject: "рк░рлАркЭркирк┐ркВркЧ", difficulty: "Hard", question: "ркЬрлЛ ркЕркВркЧрлНрк░рлЗркЬрлА ркорлВрк│рк╛ркХрлНрк╖рк░рлЛркорк╛ркВ (A=1, B=2...) 'CAT' = 24 рк╣рлЛркп, ркдрлЛ 'DOG' = ?", options: { A: "26", B: "28", C: "30", D: "32" }, answer: "A", solution: "CAT = C(3) + A(1) + T(20) = 24. DOG = D(4) + O(15) + G(7) = 26." },
        { subject: "ркЕрк░рлНркеркдркВркдрлНрк░", difficulty: "Medium", question: "GST (ркЧрлБркбрлНрк╕ ркПркирлНркб рк╕рк░рлНрк╡рк┐рк╕ ркЯрлЗркХрлНрк╕) ркнрк╛рк░ркдркорк╛ркВ ркХрлНркпрк╛рк░рлЗ рк▓рк╛ркЧрлБ ркХрк░рк╡рк╛ркорк╛ркВ ркЖрк╡рлНркпрлЛ?", options: { A: "1 ркПрккрлНрк░рк┐рк▓, 2017", B: "1 ркЬрлБрк▓рк╛ркИ, 2017", C: "1 ркЬрк╛ркирлНркпрлБркЖрк░рлА, 2017", D: "1 ркорк╛рк░рлНркЪ, 2017" }, answer: "B", solution: "GST 101ркорк╛ ркмркВркзрк╛рк░ркгрлАркп рк╕рлБркзрк╛рк░рк╛ ркжрлНрк╡рк╛рк░рк╛ рк░ркЬрлВ ркХрк░рк╡рк╛ркорк╛ркВ ркЖрк╡рлНркпрлЛ рк╣ркдрлЛ." },
        { subject: "ркмркВркзрк╛рк░ркг", difficulty: "Moderate", question: "ркмркВркзрк╛рк░ркгркирлА ркХркИ ркЕркирлБрк╕рлВркЪрк┐ (Schedule) ркорк╛ркВ ркорк╛ркирлНркп ркнрк╛рк╖рк╛ркУ (Recognized Languages) ркирлЛ рк╕ркорк╛рк╡рлЗрк╢ ркХрк░рк╡рк╛ркорк╛ркВ ркЖрк╡рлНркпрлЛ ркЫрлЗ?", options: { A: "рк╕рк╛ркдркорлА ркЕркирлБрк╕рлВркЪрк┐", B: "ркЖркаркорлА ркЕркирлБрк╕рлВркЪрк┐", C: "ркирк╡ркорлА ркЕркирлБрк╕рлВркЪрк┐", D: "ркжрк╕ркорлА ркЕркирлБрк╕рлВркЪрк┐" }, answer: "B", solution: "ркЖ ркЕркирлБрк╕рлВркЪрк┐ркорк╛ркВ рк╣рк╛рк▓ркорк╛ркВ 22 ркнрк╛рк╖рк╛ркУркирлЛ рк╕ркорк╛рк╡рлЗрк╢ ркерк╛ркп ркЫрлЗ." },
        { subject: "ркЗркдрк┐рк╣рк╛рк╕", difficulty: "Medium", question: "ркирлАркЪрлЗркирк╛ рк╡рк┐ркзрк╛ркирлЛ ркзрлНркпрк╛ркиркорк╛ркВ рк▓рлЛ: (рк╡рк┐ркзрк╛рки ркЖркзрк╛рк░рк┐ркд)\nрк╡рк┐ркзрк╛рки 1: ркорк╣рк╛ркдрлНркорк╛ ркЧрк╛ркВркзрлАркП 'ркХрк░рлЛ ркпрк╛ ркорк░рлЛ' (Do or Die) ркирлЛ ркирк╛рк░рлЛ ркнрк╛рк░ркд ркЫрлЛркбрлЛ ркЖркВркжрлЛрк▓рки (Quit India Movement) ркжрк░ркорк┐ркпрк╛рки ркЖрккрлНркпрлЛ рк╣ркдрлЛ.\nрк╡рк┐ркзрк╛рки 2: рк╕рлБркнрк╛рк╖ркЪркВркжрлНрк░ ркмрлЛркЭрлЗ рклрлЛрк░рк╡рк░рлНркб ркмрлНрк▓рлЛркХ (Forward Bloc) ркирлА рк╕рлНркерк╛рккркирк╛ ркХрк░рлА рк╣ркдрлА.", options: { A: "ркорк╛ркдрлНрк░ рк╡рк┐ркзрк╛рки 1 рк╕рк╛ркЪрлБркВ ркЫрлЗ.", B: "ркорк╛ркдрлНрк░ рк╡рк┐ркзрк╛рки 2 рк╕рк╛ркЪрлБркВ ркЫрлЗ.", C: "рк╡рк┐ркзрк╛рки 1 ркЕркирлЗ 2 ркмркВркирлЗ рк╕рк╛ркЪрк╛ ркЫрлЗ.", D: "рк╡рк┐ркзрк╛рки 1 ркХрлЗ 2 ркорк╛ркВркерлА ркХрлЛркИ рк╕рк╛ркЪрлБркВ ркиркерлА." }, answer: "C", solution: "ркЖ ркмркВркирлЗ ркЖркзрлБркирк┐ркХ ркнрк╛рк░ркдркирк╛ ркЗркдрк┐рк╣рк╛рк╕ркирлА ркорк╣ркдрлНркдрлНрк╡рккрлВрк░рлНркг ркШркЯркирк╛ркУ ркЕркирлЗ рк╕ркВркЧркаркирлЛ ркЫрлЗ." },
        { subject: "ркЧркгрк┐ркд", difficulty: "Medium", question: "ркЬрлЛ $\\frac{1}{3} + \\frac{1}{6} + \\frac{1}{x} = 1$ рк╣рлЛркп, ркдрлЛ $x$ ркирлА ркХрк┐ркВркоркд ркХрлЗркЯрк▓рлА ркерк╢рлЗ?", options: { A: "1", B: "2", C: "3", D: "4" }, answer: "B", solution: "$\\frac{1}{3} + \\frac{1}{6} = \\frac{2+1}{6} = \\frac{3}{6} = \\frac{1}{2}$. ркдрлЗркерлА $\\frac{1}{2} + \\frac{1}{x} = 1 \\implies \\frac{1}{x} = 1 - \\frac{1}{2} = \\frac{1}{2} \\implies x = 2$." },
        { subject: "ркЕрк░рлНркеркдркВркдрлНрк░", difficulty: "Easy", question: "ркнрк╛рк░ркдркорк╛ркВ рк░рк╛рк╖рлНркЯрлНрк░рлАркп ркЖрк╡ркХ (National Income) ркирлЛ ркЕркВркжрк╛ркЬ ркХрлЛркирк╛ ркжрлНрк╡рк╛рк░рк╛ ркдрлИркпрк╛рк░ ркХрк░рк╡рк╛ркорк╛ркВ ркЖрк╡рлЗ ркЫрлЗ?", options: { A: "ркирк╛ркгрк╛ркВ ркоркВркдрлНрк░рк╛рк▓ркп", B: "ркирлАркдрк┐ ркЖркпрлЛркЧ", C: "ркХрлЗркирлНркжрлНрк░рлАркп ркЖркВркХркбрк╛ркХрлАркп рк╕ркВркЧркарки (CSO / NSO)", D: "RBI" }, answer: "C", solution: "ркнрк╛рк░ркд рк╕рк░ркХрк╛рк░ркирлБркВ ркЖ рк╕ркВркЧркарки ркжрлЗрк╢ркирлА рк░рк╛рк╖рлНркЯрлНрк░рлАркп ркЖрк╡ркХ ркЕркирлЗ ркЕркирлНркп ркЖркВркХркбрк╛ркУ ркПркХркдрлНрк░рк┐ркд ркХрк░рлЗ ркЫрлЗ." },
        { subject: "рк░рлАркЭркирк┐ркВркЧ", difficulty: "Easy", question: "ркЬрлЛ ркЕркВркЧрлНрк░рлЗркЬрлА ркорлВрк│рк╛ркХрлНрк╖рк░рлЛркорк╛ркВ (A=1, B=2...) 'CAT' = 24 рк╣рлЛркп, ркдрлЛ 'DOG' = ?", options: { A: "26", B: "28", C: "30", D: "32" }, answer: "A", solution: "CAT = C(3) + A(1) + T(20) = 24. DOG = D(4) + O(15) + G(7) = 26." },
        { subject: "ркЗркдрк┐рк╣рк╛рк╕", difficulty: "Easy", question: "рккрлНрк░рк╛ркЪрлАрки ркнрк╛рк░ркдркорк╛ркВ 'ркмрлБркирк┐ркпрк╛ркжрлА рк╢рк┐ркХрлНрк╖ркг' (Basic Education) ркорк╛ркЯрлЗркирлА 'ркиркИ ркдрк╛рк▓рлАрко' (Nai Talim) ркпрлЛркЬркирк╛ ркХрлЛркирк╛ ркжрлНрк╡рк╛рк░рк╛ рк░ркЬрлВ ркХрк░рк╡рк╛ркорк╛ркВ ркЖрк╡рлА рк╣ркдрлА?", options: { A: "ркЬрк╡рк╛рк╣рк░рк▓рк╛рк▓ ркирлЗрк╣рк░рлБ", B: "ркорк╣рк╛ркдрлНркорк╛ ркЧрк╛ркВркзрлА", C: "рк░рк╡рлАркирлНркжрлНрк░ркирк╛рке ркЯрк╛ркЧрлЛрк░", D: "ркорлМрк▓рк╛ркирк╛ ркЕркмрлБрк▓ ркХрк▓рк╛рко ркЖркЭрк╛ркж" }, answer: "B", solution: "ркиркИ ркдрк╛рк▓рлАрко (ркмрлБркирк┐ркпрк╛ркжрлА рк╢рк┐ркХрлНрк╖ркг) ркпрлЛркЬркирк╛ 1937 ркорк╛ркВ рк╡рк░рлНркзрк╛ ркпрлЛркЬркирк╛ ркдрк░рлАркХрлЗ рк░ркЬрлВ ркХрк░рк╡рк╛ркорк╛ркВ ркЖрк╡рлА рк╣ркдрлА." },
        { subject: "рк░рлАркЭркирк┐ркВркЧ", difficulty: "Medium", question: "ркирлАркЪрлЗркирк╛ркорк╛ркВркерлА ркХркпрлЛ рк╢ркмрлНркж ркмрк╛ркХрлАркирк╛ рк╢ркмрлНркжрлЛркерлА ркЕрк▓ркЧ ркЫрлЗ? (A) ркЧрлБрк▓рк╛ркм (B) ркХркорк│ (C) рк▓рлАрк▓рлА (D) рк╡рлГркХрлНрк╖", options: { A: "ркЧрлБрк▓рк╛ркм", B: "ркХркорк│", C: "рк▓рлАрк▓рлА", D: "рк╡рлГркХрлНрк╖" }, answer: "D", solution: "ркЧрлБрк▓рк╛ркм, ркХркорк│ ркЕркирлЗ рк▓рлАрк▓рлА рклрлВрк▓рлЛркирк╛ рккрлНрк░ркХрк╛рк░ ркЫрлЗ, ркЬрлНркпрк╛рк░рлЗ рк╡рлГркХрлНрк╖ ркПркХ ркорлЛркЯрлЛ ркЫрлЛркб ркЫрлЗ." }
    ];

    // ----------------------------------------------------------------------
    // JavaScript рк▓рлЛркЬрк┐ркХ (Updated: Removed question number in renderQuestions)
    // ----------------------------------------------------------------------

    let currentQuestionIndex = 0;
    const TOTAL_QUESTIONS = questionData.length;
    const userAnswers = new Array(TOTAL_QUESTIONS).fill(null);
    const quizSection = document.getElementById('quizSection');
    const statusContainer = document.getElementById('statusContainer');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const quizContent = document.getElementById('quizContent');
    const startScreen = document.getElementById('startScreen');
    const skippedPopup = document.getElementById('skippedPopup');
    const answerKeySection = document.getElementById('answerKeySection');
    
    // START TEST LOGIC
    function startTest() {
        startScreen.style.display = 'none';
        quizContent.style.display = 'block';
        renderQuestions(); 
    }

    // NAVIGATION AND QUESTION LOGIC
    function renderQuestions() {
        quizSection.innerHTML = '';
        questionData.forEach((q, index) => {
            const questionBlock = document.createElement('div');
            questionBlock.className = 'question-block';
            questionBlock.id = `q-${index}`;
            questionBlock.style.display = 'none';

            let optionsHtml = '';
            
            ['A', 'B', 'C', 'D'].forEach(key => {
                optionsHtml += `
                    <li data-option="${key}">
                        <input type="radio" name="q${index}" value="${key}" id="q${index}-${key}" ${userAnswers[index] === key ? 'checked' : ''} onclick="recordAnswer(${index}, '${key}')">
                        <label for="q${index}-${key}">${key}. ${q.options[key]}</label>
                    </li>
                `;
            });
            
            optionsHtml += `
                <li data-option="E" style="background-color: #ffe0b2;">
                    <input type="radio" name="q${index}" value="E" id="q${index}-E" ${userAnswers[index] === 'E' ? 'checked' : ''} onclick="recordAnswer(${index}, 'E')">
                    <label for="q${index}-E">E. NOT ATTEMPT (рккрлНрк░ркпркдрлНрки ркХрк░рлНркпрлЛ ркиркерлА)</label>
                </li>
            `;

            // *** FEREFAR HERE: Removed the question number div ***
            /* Old Code:
            <div class="question-number">рккрлНрк░рк╢рлНрки ${index + 1}: ${q.subject} (${q.difficulty})</div>
            */
            
            questionBlock.innerHTML = `
                <div class="question-text">
                    <span style="font-weight: bold; color: #d9534f; margin-right: 10px;">(${q.subject} | ${q.difficulty})</span> 
                    ${q.question.replace(/\n/g, '<br>')}
                </div>
                <ul class="options-list">
                    ${optionsHtml}
                </ul>
            `;
            quizSection.appendChild(questionBlock);
        });

        renderStatusContainer();
        showQuestion(currentQuestionIndex);
    }

    function showQuestion(index) {
        document.querySelectorAll('.question-block').forEach((block, i) => {
            block.style.display = (i === index) ? 'block' : 'none';
        });
        currentQuestionIndex = index;
        updateNavigationButtons();
    }

    function updateNavigationButtons() {
        prevBtn.disabled = currentQuestionIndex === 0;
        nextBtn.disabled = currentQuestionIndex === TOTAL_QUESTIONS - 1;
        updateStatusContainer();
    }

    function recordAnswer(index, answer) {
        userAnswers[index] = answer;
        updateStatusContainer();
    }

    nextBtn.addEventListener('click', () => {
        if (currentQuestionIndex < TOTAL_QUESTIONS - 1) {
            showQuestion(currentQuestionIndex + 1);
        }
    });

    prevBtn.addEventListener('click', () => {
        if (currentQuestionIndex > 0) {
            showQuestion(currentQuestionIndex - 1);
        }
    });

    // STATUS BAR LOGIC
    function renderStatusContainer() {
        statusContainer.innerHTML = '';
        questionData.forEach((_, index) => {
            const statusBox = document.createElement('span');
            statusBox.className = 'status-box';
            statusBox.textContent = index + 1;
            statusBox.onclick = () => showQuestion(index);
            statusBox.id = `status-${index}`;
            statusContainer.appendChild(statusBox);
        });
        updateStatusContainer();
    }

    function updateStatusContainer() {
        userAnswers.forEach((answer, index) => {
            const statusBox = document.getElementById(`status-${index}`);
            if (statusBox) {
                statusBox.classList.remove('attempted', 'skipped');
                if (answer !== null) {
                    statusBox.classList.add('attempted');
                } else {
                    statusBox.classList.add('skipped'); 
                }
            }
        });
    }

    // SKIPPED QUESTIONS POPUP LOGIC
    function showSkippedQuestions() {
        const skippedQs = userAnswers.map((ans, index) => ans === null ? index + 1 : null).filter(n => n !== null);
        
        const skippedMessage = document.getElementById('skippedMessage');
        const skippedList = document.getElementById('skippedList');
        skippedList.innerHTML = '';

        if (skippedQs.length === 0) {
            skippedMessage.innerHTML = "ркдркорлЗ ркмркзрк╛ рккрлНрк░рк╢рлНркирлЛркирлЛ рккрлНрк░ркпркдрлНрки ркХрк░рлНркпрлЛ ркЫрлЗ (ркЕркерк╡рк╛ E рк╡рк┐ркХрк▓рлНркк рккрк╕ркВркж ркХрк░рлНркпрлЛ ркЫрлЗ).";
        } else {
            skippedMessage.innerHTML = `ркдркорлЗ ркХрлБрк▓ <strong>${skippedQs.length}</strong> рккрлНрк░рк╢рлНркирлЛркирлЛ рккрлНрк░ркпркдрлНрки ркХрк░рлНркпрлЛ ркиркерлА (ркЦрк╛рк▓рлА ркЫрлЛркбрлНркпрк╛ ркЫрлЗ).`;
            skippedQs.forEach(qNum => {
                const li = document.createElement('li');
                li.textContent = `рккрлНрк░рк╢рлНрки ${qNum}`;
                li.onclick = () => {
                    hideSkippedPopup();
                    showQuestion(qNum - 1);
                };
                li.style.cursor = 'pointer';
                li.style.marginBottom = '5px';
                li.style.color = '#337ab7';
                skippedList.appendChild(li);
            });
        }
        
        skippedPopup.style.display = 'block';
    }
    
    function hideSkippedPopup() {
        skippedPopup.style.display = 'none';
    }


    // SUBMIT AND RESULT LOGIC
    function submitTest() {
        let correctCount = 0;
        let incorrectCount = 0;
        let unattemptedCount = 0;
        let eOptionCount = 0;
        let finalScore = 0;
        let answerKeyHtml = '';

        userAnswers.forEach((userAns, index) => {
            const q = questionData[index];
            const isCorrect = userAns === q.answer;
            
            let resultClass = '';
            let resultText = '';
            let scoreChange = 0;

            if (userAns === null) {
                unattemptedCount++;
                scoreChange = -0.33;
                resultClass = 'incorrect';
                resultText = `ркЦрк╛рк▓рлА ркЫрлЛркбрлЗрк▓рлЛ. (-0.33)`;
            } else if (userAns === 'E') {
                eOptionCount++;
                scoreChange = 0;
                resultClass = 'correct';
                resultText = `E рккрк╕ркВркж ркХрк░рлЗрк▓ ркЫрлЗ. (0)`;
            } else if (isCorrect) {
                correctCount++;
                scoreChange = 1;
                resultClass = 'correct';
                resultText = `рк╕рк╛ркЪрлЛ ркЬрк╡рк╛ркм (+1)`;
            } else {
                incorrectCount++;
                scoreChange = -0.33;
                resultClass = 'incorrect';
                resultText = `ркЦрлЛркЯрлЛ ркЬрк╡рк╛ркм (-0.33)`;
            }

            finalScore += scoreChange;

            answerKeyHtml += `
                <div class="answer-key-item">
                    <strong>рккрлНрк░рк╢рлНрки ${index + 1} (${q.subject}):</strong> ${q.question.substring(0, 50)}...
                    <br>ркдркорк╛рк░рлЛ ркЬрк╡рк╛ркм: <span style="color: ${userAns === q.answer ? 'green' : userAns === 'E' ? '#337ab7' : 'red'};">${userAns === null ? 'N/A' : userAns}</span>, рк╕рк╛ркЪрлЛ ркЬрк╡рк╛ркм: ${q.answer} 
                    <span class="${resultClass}"> (${resultText})</span>.
                    <br>рк╕рлЛрк▓рлНркпрлБрк╢рки: ${q.solution}
                </div>
            `;
        });
        
        const negativeQs = incorrectCount + unattemptedCount;

        // Update Result Display
        document.getElementById('totalQs').textContent = TOTAL_QUESTIONS;
        document.getElementById('attemptedQs').textContent = TOTAL_QUESTIONS - unattemptedCount;
        document.getElementById('negativeQs').textContent = negativeQs;
        document.getElementById('finalScore').textContent = finalScore.toFixed(2);
        document.getElementById('answerKey').innerHTML = answerKeyHtml;

        // Update Chart Data
        const chartCorrect = document.getElementById('chartCorrect');
        const chartIncorrect = document.getElementById('chartIncorrect');
        const chartEOption = document.getElementById('chartEOption');
        
        const correctPercent = (correctCount / TOTAL_QUESTIONS) * 100;
        const eOptionPercent = (eOptionCount / TOTAL_QUESTIONS) * 100;
        const incorrectPercent = (negativeQs / TOTAL_QUESTIONS) * 100;
        
        const circumference = 100; 

        // Set segments for Pie Chart (Simulated)
        chartCorrect.setAttribute('stroke-dasharray', `${correctPercent} ${circumference}`);
        
        // Start E Option segment after Correct segment
        chartEOption.setAttribute('stroke-dasharray', `${eOptionPercent} ${circumference}`);
        chartEOption.setAttribute('stroke-dashoffset', `-${correctPercent}`);
        
        // Start Incorrect segment after Correct and E Option segments
        chartIncorrect.setAttribute('stroke-dasharray', `${incorrectPercent} ${circumference}`);
        chartIncorrect.setAttribute('stroke-dashoffset', `-${correctPercent + eOptionPercent}`);
        
        // Update Legend
        document.getElementById('correctQsLegend').textContent = correctCount;
        document.getElementById('incorrectQsLegend').textContent = negativeQs;
        document.getElementById('eOptionQsLegend').textContent = eOptionCount;


        // Transition to Results
        quizContent.style.display = 'none';
        document.getElementById('resultSection').style.display = 'block';
    }

    // Toggle Solution Section
    function toggleSolution() {
        if (answerKeySection.style.display === 'none' || answerKeySection.style.display === '') {
            answerKeySection.style.display = 'block';
            document.getElementById('solutionButton').textContent = 'ркЬрк╡рк╛ркм ркХрлА ркЕркирлЗ рк╕рлЛрк▓рлНркпрлБрк╢рки ркЫрлБрккрк╛рк╡рлЛ';
        } else {
            answerKeySection.style.display = 'none';
            document.getElementById('solutionButton').textContent = 'ркЬрк╡рк╛ркм ркХрлА ркЕркирлЗ рк╕рлЛрк▓рлНркпрлБрк╢рки ркЬрлБркУ';
        }
    }

    // Initial setup
    window.onload = () => {
        window.startTest = startTest;
        window.recordAnswer = recordAnswer;
        window.showSkippedQuestions = showSkippedQuestions;
        window.hideSkippedPopup = hideSkippedPopup;
        window.submitTest = submitTest;
        window.toggleSolution = toggleSolution;
    };
</script>

</body>
</html>
