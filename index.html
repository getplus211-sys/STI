<!DOCTYPE html>
<html lang="gu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>STI Mock Test</title>

<!-- Netlify Identity Widget -->
<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

<style>
    body { margin: 0; font-family: Arial; background: #f2f6ff; }

    /* HEADER */
    .header {
        background: #004d99;
        padding: 15px 20px;
        color: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .header h1 { margin: 0; font-size: 22px; }
    .nav-btn {
        background: white;
        color: #004d99;
        padding: 6px 14px;
        border-radius: 6px;
        font-weight: bold;
        border: none;
        margin-left: 8px;
        cursor: pointer;
    }

    /* CONTAINER */
    .container {
        padding: 15px;
    }

    .test-block {
        background: white;
        margin-bottom: 20px;
        padding: 18px;
        border-radius: 10px;
        box-shadow: 0px 3px 10px rgba(0,0,0,0.1);
    }
    .test-block h2 { color: #004d99; margin-top: 0; }
    .btn {
        background: #ff6600;
        color: white;
        padding: 10px 14px;
        border-radius: 6px;
        text-decoration: none;
        display: inline-block;
    }

    /* FOOTER FIXED */
    .footer {
        background: #222;
        color: white;
        text-align: center;
        padding: 12px;
        position: fixed;
        bottom: 0;
        width: 100%;
    }

    /* CENTER POPUP FIX FIXED */
    .popup {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        width: 85%;
        max-width: 350px;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 4px 25px rgba(0,0,0,0.3);
        display: none;
        z-index: 99999;
    }
    .popup h3 { margin-top: 0; }
    .close-btn {
        background: red;
        color: white;
        padding: 5px 10px;
        border-radius: 6px;
        float: right;
    }
</style>
</head>

<body>

<!-- HEADER -->
<div class="header">
    <h1>STI Mock Test</h1>
    <div id="authArea">
        <button class="nav-btn" onclick="openPopup('login')">Login</button>
        <button class="nav-btn" onclick="openPopup('register')">Register</button>
    </div>
</div>


<!-- POPUP BOX -->
<div id="popupBox" class="popup">
    <button class="close-btn" onclick="closePopup()">X</button>
    <h3 id="popupTitle">Login</h3>
    <div id="popupContent"></div>
</div>




<div class="container">

    <!-- DEMO TEST -->
    <div class="test-block">
        <h2>⭐ Demo Test</h2>
        <p>મફતમાં ડેમો ટેસ્ટ આપી શકો છો.</p>
        <a href="#" class="btn" style="background:#00a000;">Start Demo</a>
    </div>

    <!-- PAID TEST -->
    <div class="test-block">
        <h2>Paper 1 – PSI/ASI</h2>
        <p>કિંમત ₹99/-</p>
        <a class="btn" href="#">Buy Now</a>
    </div>

</div>

<!-- FOOTER -->
<div class="footer">
    © 2025 STI Mock Test | Contact: 6353511804
</div>



<script>
// -------------------------
// OPEN POPUP
// -------------------------
function openPopup(type) {
    const box = document.getElementById("popupBox");
    const title = document.getElementById("popupTitle");
    const content = document.getElementById("popupContent");

    if (type === "login") {
        title.textContent = "Login";
        content.innerHTML = `
            <button onclick="netlifyIdentity.open('login')" class="btn" style="width:100%;text-align:center;">
                Login with Email
            </button>
        `;
    } else {
        title.textContent = "Register";
        content.innerHTML = `
            <button onclick="netlifyIdentity.open('signup')" class="btn" style="width:100%;text-align:center;">
                Create New Account
            </button>
        `;
    }

    box.style.display = "block";
}

// CLOSE POPUP
function closePopup() {
    document.getElementById("popupBox").style.display = "none";
}


// ---------------------
// NETLIFY LOGIN SYSTEM
// ---------------------
netlifyIdentity.on("login", user => {
    updateUI(user);
    closePopup();
});

netlifyIdentity.on("logout", () => {
    updateUI(null);
});

// When page loads, keep user logged in
document.addEventListener("DOMContentLoaded", () => {
    updateUI(netlifyIdentity.currentUser());
});


// UI UPDATE
function updateUI(user) {
    const area = document.getElementById("authArea");

    if (user) {
        area.innerHTML = `
            <span style="color:white; font-weight:bold;">${user.user_metadata.full_name || "User"}</span>
            <button class="nav-btn" onclick="netlifyIdentity.logout()">Logout</button>
        `;
    } else {
        area.innerHTML = `
            <button class="nav-btn" onclick="openPopup('login')">Login</button>
            <button class="nav-btn" onclick="openPopup('register')">Register</button>
        `;
    }
}
</script>

</body>
</html>
